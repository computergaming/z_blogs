
<!--
    @author:  zZZ....
    @description: 分类列表
    @date: 2022/3/8
-->
<title>zZZ.... | 画廊浏览中</title>



    <script src="/js/blog_md5.js"></script>
    <style>
      .avatar-upload-blog {
        width: 4rem;
        height: 4rem;
        border: 1px dashed #e6e7e9;
        background: #ffffff6b;
        flex-direction: column;
        transition: color 0.3s, background-color 0.3s;
      }
      .bgimg{

        background: url(/tabler/static/photos/1b73704b282a8ec6.jpg) no-repeat;
        background-size: cover;
        -webkit-background-size: cover;
        -o-background-size: cover;

      }

      div[contenteditable='true']{
        outline: 1px solid lightgrey;
      }

      .blog-gallery{
        word-break:keep-all;
        white-space:nowrap;
        overflow:hidden;
      }


      .mt-3{
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        align-content: center;
        justify-content: space-between;
        align-items: center;
      }

    </style>


        <div class="container-xl">
          <!-- Page title -->
          <div class="page-header d-print-none">
            <div class="row align-items-center">
              <div class="col">
                <h2 class="page-title">
                  Gallery
                </h2>
                <div class="text-muted mt-1">1-12 of 241 photos</div>
              </div>
              <div class="col-6 col-sm-4 col-md-2 col-xl-auto py-3">
                <a href="#" class="btn  btn-primary  btn-icon" aria-label="Dribbble" id="galleryAll">
                  all
                </a>
              </div>
              <div class="col-6 col-sm-4 col-md-2 col-xl-auto py-3">
                <a href="#" class="btn  btn-primary  btn-icon" aria-label="Dribbble" id="galleryBlog">
                  blog
                </a>
              </div>
              <!-- Page title actions -->
              <div class="col-auto ms-auto d-print-none">
                <div class="d-flex">
                  <div class="me-3">
                    <div class="input-icon">
                      <input type="text" value="" class="form-control" placeholder="Search…" autocomplete="off">
                      <span class="input-icon-addon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7" /><line x1="21" y1="21" x2="15" y2="15" /></svg>
                      </span>
                    </div>
                  </div>

                  <a href="#" class="btn btn-primary"   data-bs-toggle="modal" data-bs-target="#modal-team" onclick="" >
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                    Add Pic
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="page-body">
          <div class="container-xl">
            <div class="row row-cards" id="blog_gallery_cards">

                <div class="col-sm-6 col-lg-4 "  data-z-placeholder="1">
                  <div class="card placeholder-glow">
                    <div class="ratio ratio-4x3 card-img-top placeholder"></div>
                    <div class="card-body">
                      <div class="mt-3">
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4" data-z-placeholder="1">
                  <div class="card placeholder-glow">
                    <div class="ratio ratio-4x3 card-img-top placeholder"></div>
                    <div class="card-body">
                      <div class="mt-3">
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4" data-z-placeholder="1">
                  <div class="card placeholder-glow">
                    <div class="ratio ratio-4x3 card-img-top placeholder"></div>
                    <div class="card-body">
                      <div class="mt-3">
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4" data-z-placeholder="1">
                  <div class="card placeholder-glow">
                    <div class="ratio ratio-4x3 card-img-top placeholder"></div>
                    <div class="card-body">
                      <div class="mt-3">
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4" data-z-placeholder="1">
                  <div class="card placeholder-glow">
                    <div class="ratio ratio-4x3 card-img-top placeholder"></div>
                    <div class="card-body">
                      <div class="mt-3">
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4" data-z-placeholder="1">
                  <div class="card placeholder-glow">
                    <div class="ratio ratio-4x3 card-img-top placeholder"></div>
                    <div class="card-body">
                      <div class="mt-3">
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                        <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" aria-hidden="true"></a>
                      </div>
                    </div>
                  </div>
                </div>

            </div>
            <div class="d-flex" id="blog_gallery_data_footer" style="width: 100%;background-color: #e6e7e99c;margin-top: 15px;border-radius: 10px">
              <i id="blogLoad" class="ti ti-loader blog-display" style="margin-left: 45%;font-size: 15px;"></i>
              <span id="blogBottom" class="blog-display" style="font-size: 15px;color: white;margin-left: 45%">已经到底啦~</span>
            </div>
          </div>
        </div>



<!--上传模态框-->
    <div class="modal modal-blur fade" id="modal-team" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 id="errMsg" class="modal-title">Add a new picture</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row mb-3 align-items-end">
              <div class="col-auto">
                <a href="#" class="avatar avatar-upload rounded" onclick="addPic()">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                  <span class="avatar-upload-text">Add</span>
                </a>
              </div>
              <div class="col">

                <span class="avatar avatar-upload-blog rounded ">

                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                </span>
                <span  class="avatar avatar-upload-blog rounded">
                   <img src="" style="display:inline-block;max-height: 62px;max-width: 62px">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                </span>

                <span  class="avatar avatar-upload-blog rounded">
                   <img src="" style="display:inline-block;max-height: 62px;max-width: 62px">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                </span>

                <span  class="avatar avatar-upload-blog rounded">
                   <img src="" style="display:inline-block;max-height: 62px;max-width: 62px">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                </span>

                <span class="avatar avatar-upload-blog rounded">
                   <img src="" style="display:inline-block;max-height: 62px;max-width: 62px">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                </span>

                <span class="avatar avatar-upload-blog rounded">
                   <img src="" class="card-img-top" style="display:inline-block;">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                </span>

                <input type="file" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg" id="$cusFiles_v"   name="$cusFiles_v" class="form-control" multiple style="display: none"/>
              </div>
            </div>

            <div>
              <label class="form-label">Additional info</label>
              <textarea name="imgName" class="form-control"></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn  btn-primary" data-bs-dismiss="modal">cancel</button>
            <button type="button" class="btn btn-primary" onclick="fileUpload()">upload </button>
          </div>
        </div>
      </div>
    </div>
<!-- 删除模态框 -->
    <div class="modal  fade" id="modal-danger" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          <div class="modal-status bg-danger"></div>
          <div class="modal-body text-center py-4">
            <!-- Download SVG icon from http://tabler-icons.io/i/alert-triangle -->
            <svg xmlns="http://www.w3.org/2000/svg" class="icon mb-2 text-danger icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 9v2m0 4v.01"></path><path d="M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75"></path></svg>
            <h3>Are you sure?</h3>
            <!--                <div class="text-muted">Do you really want to remove 84 files? What you've done cannot be undone.</div>-->
          </div>
          <div class="modal-footer">
            <div class="w-100">
              <div class="row">
                <div class="col"><a href="#" class="btn w-100" data-bs-dismiss="modal">
                  Cancel
                </a></div>
                <div class="col" id="blog_gallery_del"><a href="#"  class="btn btn-danger w-100" >
                  Delete
                </a></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

<!--脚本-->
   <script>

     $(function () {

       //取消模态框 点击空白处时关闭
       $('#modal-team').modal({
         backdrop:'static',
       });
       $('#modal-danger').modal({
         backdrop:'static',
       });

       //图片预览
       document.getElementById('$cusFiles_v').onchange=function (e) {
         arr = [];
          gFiles = e.currentTarget.files;
         if (gFiles && gFiles.length>0){
           let spans = document.querySelectorAll('span.avatar.avatar-upload-blog.rounded');
           for (let i = 0; i < spans.length; i++) {
             spans[i].style.backgroundImage ='url()';
             spans[i].lastElementChild.style.display = '';
           }

           let g =gFiles.length < 6?gFiles.length:6;
           for (let i = 0; i < g; i++) {
             let reads= new FileReader();
             let reads2= new FileReader();
             reads.readAsDataURL(gFiles[i]);
             reads2.readAsBinaryString(gFiles[i]);
             //base64预览
             reads.onload=function (e) {
               spans[i].style.backgroundImage ='url('+ reads.result+')';
               spans[i].style.backgroundSize = "cover" ;
               spans[i].lastElementChild.style.display = 'none';
             };
             //图片MD5防止重复
             reads2.onload=function (e) {
               let s = MD5(reads2.result);
               arr.push(s);
             }
           }
         }
       };

       //加载数据
       pageDataGallery.p.type='gallery';
       imgList(1,12);


       document.getElementById("galleryAll").onclick =function (e) {
         //加载数据
         pageDataGallery.p.type=null;
         imgList(1,12);
       };

       document.getElementById("galleryBlog").onclick = function (e) {
         //加载数据
         pageDataGallery.p.type='blog';
         imgList(1,12);
       }

     });



   </script>
