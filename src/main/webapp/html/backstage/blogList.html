<!-- 
    @author:  zZZ....
    @description:
    @date: 2022/6/8
-->

<style>
    a.list-group-item:hover{
        font-weight: 600;
        color: inherit;
        background: rgb(32 107 196 / 44%);
    }
    a.list-group-item:focus{
        font-weight: 600;
        color: inherit;
        background: rgb(32 107 196 / 44%);
    }
    .blog-list-font{
        font-size: 10px;
        color: rgb(255 255 255 / 61%);
    }
    .blog-list-cursor{
        cursor:pointer;
    }
    .offcanvas-top{
        height: 100%;
    }
    div[contenteditable='true']{
        outline: 1px solid lightgrey;
    }
    h2[contenteditable='true']{
        outline: 0 solid lightgrey;
    }

    .blog-list-a{
        background-color: #62697629;
        color: #9b9c9d;
    }

    .blog-list-selected{
        background-color: #cbd5e1;
        color: #fafbfc;
    }
    .dele{
        color: red;
        font-size: 32px;
        position: absolute;
        right: 1rem;
        bottom: 2rem;
        cursor: pointer;
        display: none;
    }
    .card-body:hover .dele{
        display: inline-block;
    }
</style>
    <title>zZZ.... | 正在查看文章列表</title>

        <div class="container-xl">
            <!-- Page title -->
            <div class="page-header d-print-none">
                <div class="row align-items-center">
                    <div class="col">
                        <h2 class="page-title">
                            搜索结果
                        </h2>
                        <div class="text-muted mt-1">共 <font id="blogListTotalId">2,410</font>条 (<font id="blogListTimeId">0.19</font> 毫秒)</div>
                    </div>
                    <div class="col-auto ms-auto d-print-none">
                        <div class="d-flex">
                            <div class="me-3">
                                <div>
                                    <div class="input-icon">
                                        <input type="text" value="" autocomplete="off" class="form-control form-control-rounded" placeholder="Search…" id="blogListSearch">
                                        <span class="input-icon-addon">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="10" cy="10" r="7"></circle><line x1="21" y1="21" x2="15" y2="15"></line></svg>
                                       </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-body">
            <div class="container-xl">
                <div class="row g-4">
                    <div class="col-lg-3   col-md-3 col-sm-12">
                        <form action="" method="get">

                            <div class="list-group list-group-transparent mb-3">
                                <a class="list-group-item list-group-item-action d-flex align-items-center " data-blogs-list-category="0" href="#">
                                    原创文章
                                    <small class="text-muted ms-auto" id="isOriginal" >24</small>
                                </a>
                                <a class="list-group-item list-group-item-action d-flex align-items-center" data-blogs-list-category="1" href="#">
                                    仅我可见
                                    <small class="text-muted ms-auto" id="isPublic" >149</small>
                                </a>
                                <a class="list-group-item list-group-item-action d-flex align-items-center" data-blogs-list-category="2" href="#">
                                    草稿
                                    <small class="text-muted ms-auto" id="isDraft">88</small>
                                </a>
                                <a class="list-group-item list-group-item-action d-flex align-items-center" data-blogs-list-category="3" href="#">
                                    心情
                                    <small class="text-muted ms-auto">54</small>
                                </a>
                                <a class="list-group-item list-group-item-action d-flex align-items-center" data-blogs-list-category="4" href="#">
                                    收藏
                                    <small class="text-muted ms-auto">54</small>
                                </a>
                                <a class="list-group-item list-group-item-action d-flex align-items-center" data-blogs-list-category="5" href="#">
                                    置顶
                                    <small class="text-muted ms-auto" id="isUp">54</small>
                                </a>
                            </div>

                            <div class="subheader mb-2">发布日期</div>
                            <div class="col">
                                <div class="input-icon mb-2">
                                    <input class="form-control " autocomplete="off"  name="publishDate" placeholder="Select a date" id="publishDate"/>
                                    <span class="input-icon-addon">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                     viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                     stroke-linecap="round" stroke-linejoin="round"><path stroke="none"
                                                                                          d="M0 0h24v24H0z"
                                                                                          fill="none"></path><rect x="4"
                                                                                                                   y="5"
                                                                                                                   width="16"
                                                                                                                   height="16"
                                                                                                                   rx="2"></rect><line
                                        x1="16" y1="3" x2="16" y2="7"></line><line x1="8" y1="3" x2="8" y2="7"></line><line
                                        x1="4" y1="11" x2="20" y2="11"></line><line x1="11" y1="15" x2="12"
                                                                                    y2="15"></line><line x1="12" y1="15"
                                                                                                         x2="12"
                                                                                                         y2="18"></line></svg>
                              </span>
                                </div>
                            </div>


                            <div class="mt-5">
                                <button class="btn btn-primary w-100" onclick="blogListSearchByButton()">
                                   搜索
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-9  col-md-9 col-sm-12">
                        <div class="row row-cards" id="blogListBody" style="text-align: center">

                                <div class="col-sm-6 col-lg-4" data-z-bloglist-hidden="0" >
                                    <div class="card  ">
                                        <div class="card placeholder-glow">
                                            <div class="ratio ratio-16x9 card-img-top placeholder"></div>
                                            <div class="card-body">
                                                <div class="placeholder col-9 mb-3"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="mt-3">
                                                    <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" style="background-color: #1b2434" aria-hidden="true"></a>
                                                </div>
                                            </div>
                                            <div class="card-footer"  style="padding: 0.25rem 1.25rem;background-color: transparent">
                                                <div class="placeholder placeholder-xs col-11"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-lg-4" data-z-bloglist-hidden="1">
                                    <div class="card  ">
                                        <div class="card placeholder-glow">
                                            <div class="ratio ratio-16x9 card-img-top placeholder"></div>
                                            <div class="card-body">
                                                <div class="placeholder col-9 mb-3"></div>

                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>

                                                <div class="mt-3">
                                                    <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" style="background-color: #1b2434" aria-hidden="true"></a>
                                                </div>
                                            </div>
                                            <div class="card-footer"  style="padding: 0.25rem 1.25rem;background-color: transparent">
                                                <div class="placeholder placeholder-xs col-11"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-lg-4" data-z-bloglist-hidden="1">
                                    <div class="card  ">
                                        <div class="card placeholder-glow">
                                            <div class="ratio ratio-16x9 card-img-top placeholder"></div>
                                            <div class="card-body">
                                                <div class="placeholder col-9 mb-3"></div>

                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>

                                                <div class="mt-3">
                                                    <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" style="background-color: #1b2434" aria-hidden="true"></a>
                                                </div>
                                            </div>
                                            <div class="card-footer"  style="padding: 0.25rem 1.25rem;background-color: transparent">
                                                <div class="placeholder placeholder-xs col-11"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-lg-4" data-z-bloglist-hidden="1">
                                    <div class="card  ">
                                        <div class="card placeholder-glow">
                                            <div class="ratio ratio-16x9 card-img-top placeholder"></div>
                                            <div class="card-body">
                                                <div class="placeholder col-9 mb-3"></div>

                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>

                                                <div class="mt-3">
                                                    <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" style="background-color: #1b2434" aria-hidden="true"></a>
                                                </div>
                                            </div>
                                            <div class="card-footer"  style="padding: 0.25rem 1.25rem;background-color: transparent">
                                                <div class="placeholder placeholder-xs col-11"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-lg-4" data-z-bloglist-hidden="1">
                                    <div class="card  ">
                                        <div class="card placeholder-glow">
                                            <div class="ratio ratio-16x9 card-img-top placeholder"></div>
                                            <div class="card-body">
                                                <div class="placeholder col-9 mb-3"></div>

                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>

                                                <div class="mt-3">
                                                    <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" style="background-color: #1b2434" aria-hidden="true"></a>
                                                </div>
                                            </div>
                                            <div class="card-footer"  style="padding: 0.25rem 1.25rem;background-color: transparent">
                                                <div class="placeholder placeholder-xs col-11"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-lg-4" data-z-bloglist-hidden="1">
                                    <div class="card  ">
                                        <div class="card placeholder-glow">
                                            <div class="ratio ratio-16x9 card-img-top placeholder"></div>
                                            <div class="card-body">
                                                <div class="placeholder col-9 mb-3"></div>

                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="placeholder placeholder-xs col-11"></div>
                                                <div class="mt-3">
                                                    <a href="#" tabindex="-1" class="btn btn-primary disabled placeholder col-4" style="background-color: #1b2434" aria-hidden="true"></a>
                                                </div>
                                            </div>
                                            <div class="card-footer"  style="padding: 0.25rem 1.25rem;background-color: transparent">
                                                <div class="placeholder placeholder-xs col-11"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

<!--该功能移至其他地方-->
<div class="offcanvas offcanvas-top" tabindex="-1" id="offcanvasTop" aria-labelledby="offcanvasTopLabel"  data-bs-scroll="true" style="visibility: hidden;" aria-hidden="true">
    <div class="offcanvas-header">
        <div class="navbar-nav flex-row order-md-first" >
            <div class=" d-md-flex">
                <div class="nav-item dropdown d-md-flex me-3" >
                    <a href="#" class="nav-link px-0" data-bs-toggle="dropdown"  data-bs-trigger="focus" tabindex="-1" aria-label="Show notifications" aria-expanded="true">
                        <span class="badge bg-gray">分类</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-card" >
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">选择分类</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3" style="overflow: hidden">
                                    <div class="form-selectgroup" id="blogListCF" style="height: 133px;overflow-x:hidden;overflow-y: auto">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="nav-item dropdown d-md-flex me-3">
                    <a href="#" class="nav-link px-0" data-bs-toggle="dropdown" tabindex="-1" aria-label="Show notifications" aria-expanded="false">
                        <span class="badge bg-gray">标签</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-arrow  dropdown-menu-card">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">修改标签</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3" style="overflow: hidden">
                                    <div class="form-selectgroup" id="blogListTags" style="height: 133px;overflow-x:hidden;overflow-y: auto">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div  class="nav-item dropdown d-md-flex me-3">
                    <a href="#" class="nav-link px-0 "  data-bs-toggle="tooltip" data-bs-placement="bottom" id="blogListIsPraise" title="开启赞赏">
                        <span class="badge blog-list-a " style="font-size: 14.5px">赏</span>
                    </a>
                </div>
                <div  class="nav-item dropdown d-md-flex me-3">
                    <a href="#" class="nav-link px-0"  data-bs-toggle="tooltip" data-bs-placement="bottom" id="blogListIsUp" title="推荐">
                          <span class="badge blog-list-a">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-thumb-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.75" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3"></path>
                            </svg>
                          </span>
                    </a>
                </div>
                <div class="nav-item dropdown d-md-flex me-3">
                    <a href="#" class="nav-link px-0" data-bs-toggle="tooltip" data-bs-placement="bottom" id="blogListIsReview" title="开启评论">
                          <span class="badge blog-list-a">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-messages" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.75" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">

                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10"></path>
                                <path d="M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2"></path>
                            </svg>
                          </span>
                    </a>
                </div>
                <div  class="nav-item dropdown d-md-flex me-3">
                    <a href="#" class="nav-link px-0" data-bs-toggle="tooltip" data-bs-placement="bottom" id="blogListIsDeclare" title="转载声明">
                          <span class="badge blog-list-a">
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="4"></circle><path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path></svg>
                          </span>
                    </a>
                </div>
                <div  class="nav-item dropdown d-md-flex me-3">
                    <a href="#" class="nav-link px-0" >
                        <label class="form-check form-check-single form-switch">
                            <input class="form-check-input" type="checkbox" checked="" id="blogListIsPublic" name="isPublic">
                        </label>
                    </a>
                </div>
                <div  class="nav-item dropdown d-md-flex me-3">
                    <a href="#" class="btn btn-light btn-pill w-100" onclick="blogSave()" >
                        提交修改
                    </a>
                </div>
            </div>

        </div>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div class="page-wrapper">
            <div class="container-xl">
                <!-- Page title -->
                <div class="page-header d-print-none">
                    <div class="row align-items-center">
                        <div class="col">
                            <h2 class="page-title" id="blogListTitleId" contenteditable="true">

                            </h2>
                            <input type="hidden" id="blogListArticleId" value="id">
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-body">
                <div class="container-xl">
                    <div class="row justify-content-center">
                        <div class="col-lg-10 col-xl-9">
                            <div class="card card-lg">
                                <div class="card-body markdown" id="BlogListMDId" contenteditable="true">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>


<!-- 删除模态框 -->
<div class="modal  fade" id="modal-danger" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            <div class="modal-status bg-danger"></div>
            <div class="modal-body text-center py-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon mb-2 text-danger icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 9v2m0 4v.01"></path><path d="M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75"></path></svg>
                <h3>Are you sure?</h3>
            </div>
            <div class="modal-footer">
                <div class="w-100">
                    <div class="row">
                        <div class="col" ><a href="#"  id="blog_del" onclick="delBlog(this)" class="btn btn-danger w-100" data-bs-dismiss="modal">
                            Delete
                        </a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>



    function blogListPreHidden(divs) {
        for (let i = 0; i < divs.length; i++) {
            divs[i].style.display = 'none';
        }
    }
    function blogListPreBlock(divs) {
        for (let i = 0; i < divs.length; i++) {
            divs[i].style.display = 'block';
        }
    }


    function blogListSearchByButton() {
        let publishDate = document.getElementById('publishDate');
        blogGetList(-1,-1,{publishDate:publishDate},false);

    }


    //修改
    function blogSave() {
        let blogListIsPraise = document.getElementById('blogListIsPraise').querySelector('span').getAttribute('data-blog-selected');
        let blogListIsUp = document.getElementById('blogListIsUp').querySelector('span').getAttribute('data-blog-selected');
        let blogListIsReview = document.getElementById('blogListIsReview').querySelector('span').getAttribute('data-blog-selected');
        let blogListIsDeclare = document.getElementById('blogListIsDeclare').querySelector('span').getAttribute('data-blog-selected');
        let arry = [];
        let contentHtml = document.getElementById('BlogListMDId');
        let words = contentHtml.innerText.toString().length;
        let len = words / 4;
        let  duration=  sfm(len); //计算阅读时长  分钟
        $('input[name="tagsIds"]:checked').each(function(index, element) {
            arry.push($(this).val());
        });
       let tagsIds =  arry.length===0?undefined :arry.join(",");
        let data ={
            id:document.getElementById('blogListArticleId').value,
            title:$('#blogListTitleId').text().trim(),
            classifyId:$("input[name='classifyId']:checked").val(),
            tagsIds:tagsIds,
            galleryId:$('#galleryId').val(),
            isPraise:!!(blogListIsPraise && blogListIsPraise === '1'),
            isUp:!!(blogListIsUp && blogListIsUp === '1'),
            isReview:!!(blogListIsReview && blogListIsReview === '1'),
            isDeclare:!!(blogListIsDeclare && blogListIsDeclare === '1'),
            isPublic:document.getElementById('blogListIsPublic').checked,
            words:words,
            duration:duration,
            contentHtml:contentHtml.innerHTML,
        };
        $.ajax({
            url:'/blogBlogs/save',
            type:'post',
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            data:JSON.stringify(data),
            success:function (e) {
                if (e.success){
                    blogAlter();
                    $('#offcanvasTop').offcanvas('hide')
                }else {
                    blogAlter('修改失败','不知道除了啥问题~','warning');
                }
            }
        })
    }


    //删除
    function delBlog(el) {

        let a =el;
        let id = a.getAttribute("data-blog-id");
        if (id){
            $.ajax({
                url:'/blogBlogs/delBlog?id='+id,
                type:'get',
                success:function (e) {
                    if (e.success){
                        a.setAttribute("data-blog-id","");
                        blogGetList();
                        blogAlter();
                    }else {
                        blogAlter('删除失败','不知道除了啥问题~','warning');
                    }
                }
            })
        }else {
            blogAlter('什么也没获取到','不知道除了啥问题~','warning');
        }

    }

    /**
     * 获取博文列表
     * @param currentPage
     * @param pageSize
     * @param queryPerm
     * @param isPaging
     */
    function blogGetList(currentPage,pageSize,queryPerm){
        if (currentPage === undefined || currentPage <=0 ){
            currentPage =1;
        }
        if(pageSize === undefined || pageSize <=0){
            pageSize =6;
        }

        pageDataBlogs.start = currentPage;
        pageDataBlogs.pageSize = pageSize;
        pageDataBlogs.p = queryPerm;
        let startTime =new Date().getTime();

        if (pageDataBlogs.start<=1){
            $('#blogListBody').html('');
        }

        $.ajax({
            url:'/blogBlogs/adminList',
            type:'post',
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            data:JSON.stringify(pageDataBlogs),
            beforeSend:function(req){
                $('div[data-z-bloglist-hidden]').show();
                $('#blogListBody').append($('div[data-z-bloglist-hidden]'));

            },
            success:function (res) {
                if (res.success){
                    document.getElementById("blogListTotalId").innerText=res.data.count;
                    let list = res.data.list;

                    let rows = '';
                    for (let i = 0; i < list.length; i++) {
                        let listElement = list[i];
                        if (listElement.tagsName){
                            let split = listElement.tagsName.split(",");
                            let tags = '';
                            for (let j = 0; j < split.length; j++) {
                                tags+='<font class="" style="padding: 0 12px; border: 1px solid;font: 10px italic; color:#ffffffab; border-radius: 14px;">'+ split[j]+'</font> ';
                            }
                            listElement.tags =tags;
                        }
                        let row ='<div class="col-sm-6 col-lg-4">\n' +
                            '                                <div class="card" >' +
                            '<a href="/html/backstage/writeBlog.html?id='+listElement.id+'" target="_blank" >\n' +
                            '                                    <div  data-blog-id="'+listElement.id+'" class="card-img-top img-responsive img-responsive-16x9 blog-list-cursor" style="background-image: url( '+listElement.path+' ),url(/img/4041.jpeg)"></div>\n' +
                            '</a> \n' +
                            '                                    <div class="card-body">\n' +
                            '\n' +
                            '                                        <h3 class="card-title" style="max-height: 24px;overflow: hidden"> '+listElement.title+'   </h3>\n' +
                            '\n' +
                            '                                        <p class="text-muted" style="max-height: 90px;min-height: 90px;overflow: hidden;margin-bottom: 0"> '+listElement.about+'   </p>\n' +
                            '                                        <em style="font-weight: 500"> '+listElement.className+' </em> <span data-bs-toggle="modal" data-bs-target="#modal-danger" data-blog-id="'+listElement.id+'"  class="dele">x</span> \n' +
                            '\n' +
                            '                                    </div>\n' +
                            '                                    <div class="card-footer" style="padding: 0.25rem 1.25rem;background-color: transparent;max-height: 30px;overflow: hidden;white-space: nowrap;">\n' +
                            '                                        <em class="blog-list-font"> '+listElement.publishDate+' </em>\n' +
                            '                                        <span style="padding-left: 10px;">\n' +
                            '                                            '+listElement.tags+' ' +
                            '                                        </span>\n' +
                            '\n' +
                            '                                    </div>\n' +
                            '                                </div>\n' +
                            '                            </div>';
                        rows+=row;

                    }
                    window.requestAnimationFrame(function (e) {
                        $('#blogListBody').append(rows);
                    });

                    if (  list.length<pageDataBlogs.pageSize){
                        window.zScrollObj.blogList=false;
                    }


                }else {

                }
            },

            error:function () {
                $('#blogListBody').html('<h1>一篇文章也没有，去写博客吧~</h1>');
            },
            complete:function (e) {
                $('div[data-z-bloglist-hidden]').hide();
                pageDataBlogs.p =null;
               document.getElementById('blogListTimeId').innerText=new Date().getTime() - startTime;
            }
        })
    }

    $(function () {
        blogGetList();
        $('#offcanvasTop').on('show.bs.offcanvas',function (e) {  //顶部侧边栏 显示之前的回调
            let BlogListMDId = document.getElementById('BlogListMDId');
            let blogListTitleId  = document.getElementById('blogListTitleId');
            let blogListArticleId  = document.getElementById('blogListArticleId');
            let tools = document.querySelector('.navbar-nav.flex-row.order-md-first');
            let blogListIsPraise = document.getElementById('blogListIsPraise').querySelector('span');
            let blogListIsUp = document.getElementById('blogListIsUp').querySelector('span');
            let blogListIsReview = document.getElementById('blogListIsReview').querySelector('span');
            let blogListIsDeclare = document.getElementById('blogListIsDeclare').querySelector('span');
            tools.style.display = 'block';
            blogListTitleId.innerText = '';
            blogListArticleId.value = 'id';
            blogListIsPraise.setAttribute('data-blog-selected','0');
            blogListIsPraise.classList.remove('blog-list-selected');
            blogListIsUp.setAttribute('data-blog-selected','0');
            blogListIsUp.classList.remove('blog-list-selected');
            blogListIsReview.setAttribute('data-blog-selected','0');
            blogListIsReview.classList.remove('blog-list-selected');
            blogListIsDeclare.setAttribute('data-blog-selected','0');
            blogListIsDeclare.classList.remove('blog-list-selected');
            $.ajax({
                url:'/blogBlogs/get?id='+e.relatedTarget.getAttribute('data-blog-id'),
                type:'get',
                success:function (res) {
                    if (res.success){
                        let data = res.data;
                        BlogListMDId.innerHTML =  data.contentHtml;
                        blogListTitleId.innerText = data.title;
                        blogListArticleId.value = e.relatedTarget.getAttribute('data-blog-id');

                        if (data.isPraise){
                            blogListIsPraise.setAttribute('data-blog-selected','1');
                            blogListIsPraise.classList.add('blog-list-selected');
                        }
                        if (data.isUp){
                            blogListIsUp.setAttribute('data-blog-selected','1');
                            blogListIsUp.classList.add('blog-list-selected');
                        }
                        if (data.isReview){
                            blogListIsReview.setAttribute('data-blog-selected','1');
                            blogListIsReview.classList.add('blog-list-selected');
                        }
                        if (data.isDeclare){
                            blogListIsDeclare.setAttribute('data-blog-selected','1');
                            blogListIsDeclare.classList.add('blog-list-selected');
                        }

                    }else {
                        BlogListMDId.innerHTML = '<h1>出了点问题(⊙o⊙)？</h1>';
                        tools.style.display = 'none';
                    }
                },
                beforeSend:function (xhr) {
                    BlogListMDId.innerHTML = '<h1>Loading<span class="animated-dots"></span></h1>';
                },
                error:function () {
                    BlogListMDId.innerHTML = '<h1>出了点问题(⊙o⊙)？</h1>';
                }
            });
            let pageData ={currentPage:'1',pageSize:'500'};
            $.ajax({
                url:'/classifyController/list',
                type:'post',
                data:pageData,
                success:function (data) {
                    if (data.success && data.data.list.length !== 0){
                        blog_publish_classify('blogListCF',data.data.list,{eleName:'classifyId',value:'id',name:'classifyName'},'radio');
                    }
                }
            });
            $.ajax({
                url:'/tagsController/list',
                type:'post',
                data:pageData,
                success:function (data) {
                    if (data.success && data.data.list.length !== 0){
                        blog_publish_classify('blogListTags',data.data.list,{eleName:'tagsIds',value:'id',name:'tagsName'},'checkbox');
                    }
                }
            });
        });

        $('#modal-danger').on('show.bs.modal',function (e) {
            let id =e.relatedTarget.getAttribute('data-blog-id');
            document.getElementById('blog_del').setAttribute("data-blog-id",id);
        });

        //搜索框回车事件绑定
        $('#blogListSearch').bind('keyup', function(event) {
            if (event.keyCode === 13) {

                let obj ={};
                let publishDate =  document.getElementById('publishDate').value;

               if (publishDate){
                   obj.publishDate = publishDate.trim();
               }
               if (this.value){
                   obj.like = this.value.trim();
               }

                blogGetList(-1,-1,obj)
            }
        });

        $('a.list-group-item').click(function (e) {
           let category=  this.getAttribute('data-blogs-list-category');
            let param= {'category':category};
            blogGetList(-1,-1,param,false);
        });

        //文章详情页 按钮选中切换
        $('[data-bs-toggle="tooltip"]>span').click(function (e) {
            let attribute = this.getAttribute('data-blog-selected');
            if (attribute && attribute ==='1'){
                this.classList.remove('blog-list-selected');
                this.setAttribute('data-blog-selected','0');
            }else {
                this.setAttribute('data-blog-selected','1');
                this.classList.add('blog-list-selected');
            }

        });

    })

</script>